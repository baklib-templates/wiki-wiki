{% assign screen_width = site.settings.screen_width.value |  default: 'max-w-screen-xl' %}

<footer class="border-t text-slate-800 dark:bg-slate-900 dark:text-slate-200 border-slate-200 dark:border-gray-700 print:hidden">

  {% # 底部备案和链接 %}
  <div class="mx-auto {{ screen_width }} p-4 sm:py-6">
    <div class="sm:flex sm:items-center sm:justify-between">
      <div class="flex space-x-2 text-sm text-gray-500 sm:text-center dark:text-gray-400">
        <a href="{{site.index_path}}" class="flex items-center">
          {% assign logo = 'images/logo.png' | asset_url %}
          <img src="{{ site.favicon_url | default: logo  }}" class="h-8 mr-3" alt="{{ site.name }} Logo">
          <span class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">{{ site.name }}</span>
        </a>
      </div>
      <div class="hidden mt-4 space-x-6 sm:flex sm:justify-center sm:mt-0">
        <div>© {{ site.settings.copyright_info }}</div>
        <!-- Footer Menu -->
        {% assign footer_menus = site.settings.footer_menu | newline_to_br | split: '<br />' %}
        <!-- Links -->
        <ul class="flex space-x-2">
          {% for menu_line in footer_menus %}
            {%  assign p_menu_arr = menu_line | split: '{' %}
            {%  assign parent_menu = p_menu_arr[0] | split: '[' %}
            {%  assign sub_menus = p_menu_arr[1] | split: '|' %}
            {%  assign sub_menus_count =  sub_menus | size %}

            {% if sub_menus_count > 0 %}
              <li class="relative flex items-center space-x-2" x-data="{ open: false }" @mouseenter="open = true" @mouseleave="open = false">
                  <a class="" href="{{ parent_menu[1] | default: '#' }}" :aria-expanded="open">{{ parent_menu[0] }}</a>
                  <button class="shrink-0 p-1" :aria-expanded="open" @click.prevent="open = !open">
                      <span class="sr-only">Show submenu for "Flyout Menu"</span>
                      <svg class="w-3 h-3 fill-white" xmlns="http://www.w3.org/2000/svg" width="12" height="12">
                          <path d="M10 2.586 11.414 4 6 9.414.586 4 2 2.586l4 4z" />
                      </svg>
                  </button>
                  <!-- 2nd level menu -->
                  <ul
                      class="origin-top-right absolute top-full left-1/2 -translate-x-1/2 min-w-[240px] bg-white border border-slate-200 p-2 rounded-lg shadow-xl [&[x-cloak]]:hidden"
                      x-show="open"
                      x-transition:enter="transition ease-out duration-200 transform"
                      x-transition:enter-start="opacity-0 -translate-y-2"
                      x-transition:enter-end="opacity-100 translate-y-0"
                      x-transition:leave="transition ease-out duration-200"
                      x-transition:leave-start="opacity-100"
                      x-transition:leave-end="opacity-0"
                      x-cloak
                      @focusout="await $nextTick();!$el.contains($focus.focused()) && (open = false)"
                  >
                    {% for second_menu in sub_menus %}
                      {%  assign second_menu_arr = second_menu | split: '[' %}
                      <li>
                          <a class="text-slate-800 hover:bg-slate-50 flex items-center p-2" href="{{ second_menu_arr[1] | default: '#'}}">
                              <div class="flex items-center justify-center h-7 w-7 shrink-0 mr-2">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 text-primary w-4 h-4">
                                  <path fill-rule="evenodd" d="M4.5 7.5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-9a3 3 0 0 1-3-3v-9Z" clip-rule="evenodd" />
                                </svg>
                              </div>
                              <span class="whitespace-nowrap">{{ second_menu_arr[0] }}</span>
                          </a>
                      </li>
                    {% endfor %}
                  </ul>
              </li>
            {% else %}
              <li class="">
                <a class="hover:text-primary" href="{{ parent_menu[1] | default: '#'}}">{{ parent_menu[0] }}</a>
              </li>
            {% endif %}
          {% endfor %}
        </ul>
      </div>
    </div>
  </div>
</footer>
